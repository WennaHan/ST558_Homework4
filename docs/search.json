[
  {
    "objectID": "ST558_Homework4.html",
    "href": "ST558_Homework4.html",
    "title": "ST558_Homework4",
    "section": "",
    "text": "We’ll read in the data in two ways:\n• First, modify the code provided with the download to read in the data from a local file source (your downloaded .csv files) and combine the two data frames. Use local paths as they do in their code.\n\n# Using functions from Base R\n# load the two tables from local files\nmat &lt;- read.table(\"student+performance/student/student-mat.csv\", sep=\";\", header=TRUE)\npor &lt;- read.table(\"student+performance/student/student-por.csv\", sep=\";\", header=TRUE)\n# join them using the supplied code (an outer join on several fields)\ndat_via_merge &lt;- merge(x=mat, y=por, by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\n                                          \"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\n                                          \"reason\",\"nursery\",\"internet\"))\n# show the table and clean up\nhead(dat_via_merge)\n\n  school sex age address famsize Pstatus Medu Fedu     Mjob     Fjob     reason\n1     GP   F  15       R     GT3       T    1    1  at_home    other       home\n2     GP   F  15       R     GT3       T    1    1    other    other reputation\n3     GP   F  15       R     GT3       T    2    2  at_home    other reputation\n4     GP   F  15       R     GT3       T    2    4 services   health     course\n5     GP   F  15       R     GT3       T    3    3 services services reputation\n6     GP   F  15       R     GT3       T    3    4 services   health     course\n  nursery internet guardian.x traveltime.x studytime.x failures.x schoolsup.x\n1     yes      yes     mother            2           4          1         yes\n2      no      yes     mother            1           2          2         yes\n3     yes       no     mother            1           1          0         yes\n4     yes      yes     mother            1           3          0         yes\n5     yes      yes      other            2           3          2          no\n6     yes      yes     mother            1           3          0         yes\n  famsup.x paid.x activities.x higher.x romantic.x famrel.x freetime.x goout.x\n1      yes    yes          yes      yes         no        3          1       2\n2      yes     no           no      yes        yes        3          3       4\n3      yes    yes          yes      yes         no        4          3       1\n4      yes    yes          yes      yes         no        4          3       2\n5      yes    yes          yes      yes        yes        4          2       1\n6      yes    yes          yes      yes         no        4          3       2\n  Dalc.x Walc.x health.x absences.x G1.x G2.x G3.x guardian.y traveltime.y\n1      1      1        1          2    7   10   10     mother            2\n2      2      4        5          2    8    6    5     mother            1\n3      1      1        2          8   14   13   13     mother            1\n4      1      1        5          2   10    9    8     mother            1\n5      2      3        3          8   10   10   10      other            2\n6      1      1        5          2   12   12   11     mother            1\n  studytime.y failures.y schoolsup.y famsup.y paid.y activities.y higher.y\n1           4          0         yes      yes    yes          yes      yes\n2           2          0         yes      yes     no           no      yes\n3           1          0         yes      yes     no          yes      yes\n4           3          0         yes      yes     no          yes      yes\n5           3          0          no      yes    yes          yes      yes\n6           3          0         yes      yes     no          yes      yes\n  romantic.y famrel.y freetime.y goout.y Dalc.y Walc.y health.y absences.y G1.y\n1         no        3          1       2      1      1        1          4   13\n2        yes        3          3       4      2      4        5          2   13\n3         no        4          3       1      1      1        2          8   14\n4         no        4          3       2      1      1        5          2   10\n5        yes        4          2       1      2      3        3          2   13\n6         no        4          3       2      1      1        5          2   11\n  G2.y G3.y\n1   13   13\n2   11   11\n3   13   12\n4   11   10\n5   13   13\n6   12   12\n\n\n• Second, read in and combine the data using functions from the tidyverse. Use an inner_join() on the variables they used in their code. Do you notice any issues? Make a note of the issue.\n• Use an inner_join() on all variables other than G1, G2, G3, paid, and absences. Use this form of the combined data in further exercises.\n\n# Using functions from tidyvse\nlibrary(tidyverse)\n\nWarning: package 'ggplot2' was built under R version 4.2.3\n\n\nWarning: package 'tidyr' was built under R version 4.2.3\n\n\nWarning: package 'readr' was built under R version 4.2.3\n\n\nWarning: package 'dplyr' was built under R version 4.2.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# load the two tables from local files\nstudent_mat &lt;- read_delim(\"student+performance/student/student-mat.csv\",\n                          delim = \";\")\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nstudent_por &lt;- read_delim(\"student+performance/student/student-por.csv\",\n                          delim = \";\")\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# create the list of joining variables as the complement of those specified to avoid\ninner_join_vars &lt;- colnames(student_mat)[!colnames(student_mat) %in% c(\"G1\",\"G2\",\"G3\",\"absences\",\"paid\")]\n# join them as an inner join\ndat &lt;- inner_join(x = student_mat, y=student_por, by=inner_join_vars, suffix=c(\"_mat\",\"_por\"))\n# show the tibble\ndat\n\n# A tibble: 320 × 38\n   school sex     age address famsize Pstatus  Medu  Fedu Mjob     Fjob   reason\n   &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; \n 1 GP     F        18 U       GT3     A           4     4 at_home  teach… course\n 2 GP     F        17 U       GT3     T           1     1 at_home  other  course\n 3 GP     F        15 U       GT3     T           4     2 health   servi… home  \n 4 GP     F        16 U       GT3     T           3     3 other    other  home  \n 5 GP     M        16 U       LE3     T           4     3 services other  reput…\n 6 GP     M        16 U       LE3     T           2     2 other    other  home  \n 7 GP     F        17 U       GT3     A           4     4 other    teach… home  \n 8 GP     M        15 U       LE3     A           3     2 services other  home  \n 9 GP     M        15 U       GT3     T           3     4 other    other  home  \n10 GP     F        15 U       GT3     T           4     4 teacher  health reput…\n# ℹ 310 more rows\n# ℹ 27 more variables: guardian &lt;chr&gt;, traveltime &lt;dbl&gt;, studytime &lt;dbl&gt;,\n#   failures &lt;dbl&gt;, schoolsup &lt;chr&gt;, famsup &lt;chr&gt;, paid_mat &lt;chr&gt;,\n#   activities &lt;chr&gt;, nursery &lt;chr&gt;, higher &lt;chr&gt;, internet &lt;chr&gt;,\n#   romantic &lt;chr&gt;, famrel &lt;dbl&gt;, freetime &lt;dbl&gt;, goout &lt;dbl&gt;, Dalc &lt;dbl&gt;,\n#   Walc &lt;dbl&gt;, health &lt;dbl&gt;, absences_mat &lt;dbl&gt;, G1_mat &lt;dbl&gt;, G2_mat &lt;dbl&gt;,\n#   G3_mat &lt;dbl&gt;, paid_por &lt;chr&gt;, absences_por &lt;dbl&gt;, G1_por &lt;dbl&gt;, …\n\n\n• Next, for the math data, Portuguese, and combined data, choose four categorical variables you are interested in and convert those into factor variables in each tibble (use the same four variables in each). Use the mutate() function to accomplish this.\n\n# use mutate() to convert to factor\ndat &lt;- mutate(dat, across(c(address, reason, internet, higher), as.factor))\nmat &lt;- mutate(mat, across(c(address, reason, internet, higher), as.factor))\npor &lt;- mutate(por, across(c(address, reason, internet, higher), as.factor))"
  },
  {
    "objectID": "ST558_Homework4.html#task-1-read-in-the-data-and-modify",
    "href": "ST558_Homework4.html#task-1-read-in-the-data-and-modify",
    "title": "ST558_Homework4",
    "section": "",
    "text": "We’ll read in the data in two ways:\n• First, modify the code provided with the download to read in the data from a local file source (your downloaded .csv files) and combine the two data frames. Use local paths as they do in their code.\n\n# Using functions from Base R\n# load the two tables from local files\nmat &lt;- read.table(\"student+performance/student/student-mat.csv\", sep=\";\", header=TRUE)\npor &lt;- read.table(\"student+performance/student/student-por.csv\", sep=\";\", header=TRUE)\n# join them using the supplied code (an outer join on several fields)\ndat_via_merge &lt;- merge(x=mat, y=por, by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\n                                          \"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\n                                          \"reason\",\"nursery\",\"internet\"))\n# show the table and clean up\nhead(dat_via_merge)\n\n  school sex age address famsize Pstatus Medu Fedu     Mjob     Fjob     reason\n1     GP   F  15       R     GT3       T    1    1  at_home    other       home\n2     GP   F  15       R     GT3       T    1    1    other    other reputation\n3     GP   F  15       R     GT3       T    2    2  at_home    other reputation\n4     GP   F  15       R     GT3       T    2    4 services   health     course\n5     GP   F  15       R     GT3       T    3    3 services services reputation\n6     GP   F  15       R     GT3       T    3    4 services   health     course\n  nursery internet guardian.x traveltime.x studytime.x failures.x schoolsup.x\n1     yes      yes     mother            2           4          1         yes\n2      no      yes     mother            1           2          2         yes\n3     yes       no     mother            1           1          0         yes\n4     yes      yes     mother            1           3          0         yes\n5     yes      yes      other            2           3          2          no\n6     yes      yes     mother            1           3          0         yes\n  famsup.x paid.x activities.x higher.x romantic.x famrel.x freetime.x goout.x\n1      yes    yes          yes      yes         no        3          1       2\n2      yes     no           no      yes        yes        3          3       4\n3      yes    yes          yes      yes         no        4          3       1\n4      yes    yes          yes      yes         no        4          3       2\n5      yes    yes          yes      yes        yes        4          2       1\n6      yes    yes          yes      yes         no        4          3       2\n  Dalc.x Walc.x health.x absences.x G1.x G2.x G3.x guardian.y traveltime.y\n1      1      1        1          2    7   10   10     mother            2\n2      2      4        5          2    8    6    5     mother            1\n3      1      1        2          8   14   13   13     mother            1\n4      1      1        5          2   10    9    8     mother            1\n5      2      3        3          8   10   10   10      other            2\n6      1      1        5          2   12   12   11     mother            1\n  studytime.y failures.y schoolsup.y famsup.y paid.y activities.y higher.y\n1           4          0         yes      yes    yes          yes      yes\n2           2          0         yes      yes     no           no      yes\n3           1          0         yes      yes     no          yes      yes\n4           3          0         yes      yes     no          yes      yes\n5           3          0          no      yes    yes          yes      yes\n6           3          0         yes      yes     no          yes      yes\n  romantic.y famrel.y freetime.y goout.y Dalc.y Walc.y health.y absences.y G1.y\n1         no        3          1       2      1      1        1          4   13\n2        yes        3          3       4      2      4        5          2   13\n3         no        4          3       1      1      1        2          8   14\n4         no        4          3       2      1      1        5          2   10\n5        yes        4          2       1      2      3        3          2   13\n6         no        4          3       2      1      1        5          2   11\n  G2.y G3.y\n1   13   13\n2   11   11\n3   13   12\n4   11   10\n5   13   13\n6   12   12\n\n\n• Second, read in and combine the data using functions from the tidyverse. Use an inner_join() on the variables they used in their code. Do you notice any issues? Make a note of the issue.\n• Use an inner_join() on all variables other than G1, G2, G3, paid, and absences. Use this form of the combined data in further exercises.\n\n# Using functions from tidyvse\nlibrary(tidyverse)\n\nWarning: package 'ggplot2' was built under R version 4.2.3\n\n\nWarning: package 'tidyr' was built under R version 4.2.3\n\n\nWarning: package 'readr' was built under R version 4.2.3\n\n\nWarning: package 'dplyr' was built under R version 4.2.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# load the two tables from local files\nstudent_mat &lt;- read_delim(\"student+performance/student/student-mat.csv\",\n                          delim = \";\")\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nstudent_por &lt;- read_delim(\"student+performance/student/student-por.csv\",\n                          delim = \";\")\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# create the list of joining variables as the complement of those specified to avoid\ninner_join_vars &lt;- colnames(student_mat)[!colnames(student_mat) %in% c(\"G1\",\"G2\",\"G3\",\"absences\",\"paid\")]\n# join them as an inner join\ndat &lt;- inner_join(x = student_mat, y=student_por, by=inner_join_vars, suffix=c(\"_mat\",\"_por\"))\n# show the tibble\ndat\n\n# A tibble: 320 × 38\n   school sex     age address famsize Pstatus  Medu  Fedu Mjob     Fjob   reason\n   &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; \n 1 GP     F        18 U       GT3     A           4     4 at_home  teach… course\n 2 GP     F        17 U       GT3     T           1     1 at_home  other  course\n 3 GP     F        15 U       GT3     T           4     2 health   servi… home  \n 4 GP     F        16 U       GT3     T           3     3 other    other  home  \n 5 GP     M        16 U       LE3     T           4     3 services other  reput…\n 6 GP     M        16 U       LE3     T           2     2 other    other  home  \n 7 GP     F        17 U       GT3     A           4     4 other    teach… home  \n 8 GP     M        15 U       LE3     A           3     2 services other  home  \n 9 GP     M        15 U       GT3     T           3     4 other    other  home  \n10 GP     F        15 U       GT3     T           4     4 teacher  health reput…\n# ℹ 310 more rows\n# ℹ 27 more variables: guardian &lt;chr&gt;, traveltime &lt;dbl&gt;, studytime &lt;dbl&gt;,\n#   failures &lt;dbl&gt;, schoolsup &lt;chr&gt;, famsup &lt;chr&gt;, paid_mat &lt;chr&gt;,\n#   activities &lt;chr&gt;, nursery &lt;chr&gt;, higher &lt;chr&gt;, internet &lt;chr&gt;,\n#   romantic &lt;chr&gt;, famrel &lt;dbl&gt;, freetime &lt;dbl&gt;, goout &lt;dbl&gt;, Dalc &lt;dbl&gt;,\n#   Walc &lt;dbl&gt;, health &lt;dbl&gt;, absences_mat &lt;dbl&gt;, G1_mat &lt;dbl&gt;, G2_mat &lt;dbl&gt;,\n#   G3_mat &lt;dbl&gt;, paid_por &lt;chr&gt;, absences_por &lt;dbl&gt;, G1_por &lt;dbl&gt;, …\n\n\n• Next, for the math data, Portuguese, and combined data, choose four categorical variables you are interested in and convert those into factor variables in each tibble (use the same four variables in each). Use the mutate() function to accomplish this.\n\n# use mutate() to convert to factor\ndat &lt;- mutate(dat, across(c(address, reason, internet, higher), as.factor))\nmat &lt;- mutate(mat, across(c(address, reason, internet, higher), as.factor))\npor &lt;- mutate(por, across(c(address, reason, internet, higher), as.factor))"
  },
  {
    "objectID": "ST558_Homework4.html#task-2-summarize-the-data-very-basic-eda",
    "href": "ST558_Homework4.html#task-2-summarize-the-data-very-basic-eda",
    "title": "ST558_Homework4",
    "section": "Task 2: Summarize the Data (Very Basic EDA)",
    "text": "Task 2: Summarize the Data (Very Basic EDA)\n\nCategorical variables\n• Create a one-way contingency table, a two-way contingency table, and a three-way contingency table for some of the factor variables you created previously. Use table() to accomplish this.\n– Interpret a number from each resulting table (that is, pick out a value produced and explain what that value means.)\n\n# check data structure\nstr(dat)\n\ntibble [320 × 38] (S3: tbl_df/tbl/data.frame)\n $ school      : chr [1:320] \"GP\" \"GP\" \"GP\" \"GP\" ...\n $ sex         : chr [1:320] \"F\" \"F\" \"F\" \"F\" ...\n $ age         : num [1:320] 18 17 15 16 16 16 17 15 15 15 ...\n $ address     : Factor w/ 2 levels \"R\",\"U\": 2 2 2 2 2 2 2 2 2 2 ...\n $ famsize     : chr [1:320] \"GT3\" \"GT3\" \"GT3\" \"GT3\" ...\n $ Pstatus     : chr [1:320] \"A\" \"T\" \"T\" \"T\" ...\n $ Medu        : num [1:320] 4 1 4 3 4 2 4 3 3 4 ...\n $ Fedu        : num [1:320] 4 1 2 3 3 2 4 2 4 4 ...\n $ Mjob        : chr [1:320] \"at_home\" \"at_home\" \"health\" \"other\" ...\n $ Fjob        : chr [1:320] \"teacher\" \"other\" \"services\" \"other\" ...\n $ reason      : Factor w/ 4 levels \"course\",\"home\",..: 1 1 2 2 4 2 2 2 2 4 ...\n $ guardian    : chr [1:320] \"mother\" \"father\" \"mother\" \"father\" ...\n $ traveltime  : num [1:320] 2 1 1 1 1 1 2 1 1 1 ...\n $ studytime   : num [1:320] 2 2 3 2 2 2 2 2 2 2 ...\n $ failures    : num [1:320] 0 0 0 0 0 0 0 0 0 0 ...\n $ schoolsup   : chr [1:320] \"yes\" \"no\" \"no\" \"no\" ...\n $ famsup      : chr [1:320] \"no\" \"yes\" \"yes\" \"yes\" ...\n $ paid_mat    : chr [1:320] \"no\" \"no\" \"yes\" \"yes\" ...\n $ activities  : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ nursery     : chr [1:320] \"yes\" \"no\" \"yes\" \"yes\" ...\n $ higher      : Factor w/ 2 levels \"no\",\"yes\": 2 2 2 2 2 2 2 2 2 2 ...\n $ internet    : Factor w/ 2 levels \"no\",\"yes\": 1 2 2 1 2 2 1 2 2 2 ...\n $ romantic    : chr [1:320] \"no\" \"no\" \"yes\" \"no\" ...\n $ famrel      : num [1:320] 4 5 3 4 5 4 4 4 5 3 ...\n $ freetime    : num [1:320] 3 3 2 3 4 4 1 2 5 3 ...\n $ goout       : num [1:320] 4 3 2 2 2 4 4 2 1 3 ...\n $ Dalc        : num [1:320] 1 1 1 1 1 1 1 1 1 1 ...\n $ Walc        : num [1:320] 1 1 1 2 2 1 1 1 1 2 ...\n $ health      : num [1:320] 3 3 5 5 5 3 1 1 5 2 ...\n $ absences_mat: num [1:320] 6 4 2 4 10 0 6 0 0 0 ...\n $ G1_mat      : num [1:320] 5 5 15 6 15 12 6 16 14 10 ...\n $ G2_mat      : num [1:320] 6 5 14 10 15 12 5 18 15 8 ...\n $ G3_mat      : num [1:320] 6 6 15 10 15 11 6 19 15 9 ...\n $ paid_por    : chr [1:320] \"no\" \"no\" \"no\" \"no\" ...\n $ absences_por: num [1:320] 4 2 0 0 6 0 2 0 0 2 ...\n $ G1_por      : num [1:320] 0 9 14 11 12 13 10 15 12 14 ...\n $ G2_por      : num [1:320] 11 11 14 13 12 12 13 16 12 14 ...\n $ G3_por      : num [1:320] 11 11 14 13 13 13 13 17 13 14 ...\n\n# check NA data\nsum_na &lt;- function (col){ sum(is.na(col))}\ndat |&gt; summarize(across(everything(), sum_na))\n\n# A tibble: 1 × 38\n  school   sex   age address famsize Pstatus  Medu  Fedu  Mjob  Fjob reason\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;\n1      0     0     0       0       0       0     0     0     0     0      0\n# ℹ 27 more variables: guardian &lt;int&gt;, traveltime &lt;int&gt;, studytime &lt;int&gt;,\n#   failures &lt;int&gt;, schoolsup &lt;int&gt;, famsup &lt;int&gt;, paid_mat &lt;int&gt;,\n#   activities &lt;int&gt;, nursery &lt;int&gt;, higher &lt;int&gt;, internet &lt;int&gt;,\n#   romantic &lt;int&gt;, famrel &lt;int&gt;, freetime &lt;int&gt;, goout &lt;int&gt;, Dalc &lt;int&gt;,\n#   Walc &lt;int&gt;, health &lt;int&gt;, absences_mat &lt;int&gt;, G1_mat &lt;int&gt;, G2_mat &lt;int&gt;,\n#   G3_mat &lt;int&gt;, paid_por &lt;int&gt;, absences_por &lt;int&gt;, G1_por &lt;int&gt;,\n#   G2_por &lt;int&gt;, G3_por &lt;int&gt;\n\n# 1-way contingency table\ntable(\"internet at home?\"= dat$internet)\n\ninternet at home?\n no yes \n 48 272 \n\n\nThe 1-way contingency table shows that the majority of students have internet access available at home.\n\n# 2-way contingency table\ntable(\"internet at home?\"= dat$internet, \n      \"address\" = dat$address)\n\n                 address\ninternet at home?   R   U\n              no   21  27\n              yes  46 226\n\n\nThe 2-way contingency table shows that urban students are more likely to have internet access at home versus rural students. Also note that rural students make up a small minority of the total students in these data.\n\n# 3-way contingency table\ntable(\"internet at home?\"= dat$internet,\n      \"address\" = dat$address,\n      \"want higher ed?\"= dat$higher)\n\n, , want higher ed? = no\n\n                 address\ninternet at home?   R   U\n              no    0   0\n              yes   3   4\n\n, , want higher ed? = yes\n\n                 address\ninternet at home?   R   U\n              no   21  27\n              yes  43 222\n\n\nThe 3-way contingency table shows that the vast majority of students here do want to pursue higher education. Of the 6 students who do not, all do have internet access at home.\n• Create a conditional two-way table using table(). That is, condition on one variable’s setting and create a two-way table. Do this using two different methods:\n– Once, by subsetting the data (say with filter()) and then creating the two-way table.\n\n#Subsetdown to only students who mention the school’s reputation as the reason for taking the class. \n# 2-way contingency table, pre-filtered for condition\nfil &lt;- filter(dat, reason ==\"reputation\")\ntable(\"internet at home?\"= fil$internet,\n      \"address\"= fil$address)\n\n                 address\ninternet at home?  R  U\n              no   3  9\n              yes 18 55\n\n\nWithin this subset, we see that all the rural students have internet access at home versus 8 of 21 urbanstudents.\n– Once, by creating a three-way table and subsetting it\n\n# 3-way contingency table, conditioned by 1 dimension\ntab &lt;- table( \"internet at home?\"= dat$internet,\n              \"address\" = dat$address,\n              \"why this school?\"= dat$reason)\ntab[,,\"reputation\"]\n\n                 address\ninternet at home?  R  U\n              no   3  9\n              yes 18 55\n\n\n• Create a two-way contingency table using group_by() and summarize() from dplyr. Then use pivot_wider() to make the result look more like the output from table().\n\n# The above examples used the base R table() function, but we can create similar contingency tablesusing functions from dplyr (the tidyverse). In the table below, we see that rural students are much less likely to use “closeness to home” as the reason for taking the class versus urban students.\n# 2-way contingency table using dplyr\ndat |&gt; \n  group_by(reason, address) |&gt; \n  summarize(count = n()) |&gt; \n  pivot_wider(names_from = address, values_from = count)\n\n`summarise()` has grouped output by 'reason'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 4 × 3\n# Groups:   reason [4]\n  reason         R     U\n  &lt;fct&gt;      &lt;int&gt; &lt;int&gt;\n1 course        28    90\n2 home           9    78\n3 other          9    21\n4 reputation    21    64\n\n\n• Create a stacked bar graph and a side-by-side bar graph. Give relevant x and y labels, and a title for the plots.\n\n# data counts for plot\ndat_barplot &lt;- dat |&gt; \n  group_by(reason, address) |&gt; \n  summarize(count = n())\n\n`summarise()` has grouped output by 'reason'. You can override using the\n`.groups` argument.\n\n# stacked barplot\nggplot(data=dat_barplot, aes(x=reason, y=count, fill=address)) + \n  geom_bar(stat=\"identity\") + \n  xlab(\"Reason for choosing school\") + \n  ylab(\"Student Count\") + \n  ggtitle(\"Reason for choosing school by Address Type\") + \n  scale_fill_discrete(name=\"Address\", labels=c(\"Rural\",\"Urban\"))\n\n\n\n\n\n\n\n# side-by-side barplot\nggplot(data=dat_barplot, aes(x=reason, y=count, fill=address)) + \n  geom_bar(stat=\"identity\", position=\"dodge\") + \n  xlab(\"Reason for choosing school\") + \n  ylab(\"Student Count\") + \n  ggtitle(\"Reason for choosing school by Address Type\") + \n  scale_fill_discrete(name=\"Address\", labels=c(\"Rural\",\"Urban\"))\n\n\n\n\n\n\n\n\n\n\nNumeric variables\nThe numeric variables are age, absences, and the three test grades variables (G1, G2, and G3) from each data set (math and Portuguese).\n\n• Find measures of center and spread for three of these variables (including at least one G3 variable)\n\n# unconditioned\ndat |&gt; summarise(across(matches(\"G[0-9]\"), \n                        list(mean = mean, sd = sd), \n                        .names =\"{.col}.{.fn}\"))\n\n# A tibble: 1 × 12\n  G1_mat.mean G1_mat.sd G2_mat.mean G2_mat.sd G3_mat.mean G3_mat.sd G1_por.mean\n        &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n1        11.3      3.20        11.2      3.67        11.0      4.30        12.4\n# ℹ 5 more variables: G1_por.sd &lt;dbl&gt;, G2_por.mean &lt;dbl&gt;, G2_por.sd &lt;dbl&gt;,\n#   G3_por.mean &lt;dbl&gt;, G3_por.sd &lt;dbl&gt;\n\n\nThe results show that the mean Portuguese term grades increase slightly over time, the standard deviations of the Math term scores increase (widen) over time.\n\n– Repeat while subsetting the data in a meaningful way.\n\n# again, but subset down to only students who want to attend higher ed\ndat |&gt; filter(higher == \"yes\") |&gt; \n  summarise(across(matches(\"G[0-9]\"), \n                   list(mean = mean, sd = sd), \n                   .names =\"{.col}.{.fn}\"))\n\n# A tibble: 1 × 12\n  G1_mat.mean G1_mat.sd G2_mat.mean G2_mat.sd G3_mat.mean G3_mat.sd G1_por.mean\n        &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n1        11.3      3.19        11.3      3.63        11.1      4.25        12.5\n# ℹ 5 more variables: G1_por.sd &lt;dbl&gt;, G2_por.mean &lt;dbl&gt;, G2_por.sd &lt;dbl&gt;,\n#   G3_por.mean &lt;dbl&gt;, G3_por.sd &lt;dbl&gt;\n\n\nThe results show that the mean grades for students wanting to pursue higher education are slightly higher for all grading terms in both classes.\n\n• Find measures of center and spread across a single grouping variable for three of these variables (including a G3 variable as one of them)\n\n# conditioned on address\ndat |&gt; group_by(address) |&gt; \n  summarise(across(matches(\"G[0-9]\"), \n                   list(mean = mean, sd = sd), \n                   .names =\"{.col}.{.fn}\"))\n\n# A tibble: 2 × 13\n  address G1_mat.mean G1_mat.sd G2_mat.mean G2_mat.sd G3_mat.mean G3_mat.sd\n  &lt;fct&gt;         &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;\n1 R              10.7      3.35        10.1      4.02        9.90      4.59\n2 U              11.5      3.15        11.5      3.53       11.3       4.18\n# ℹ 6 more variables: G1_por.mean &lt;dbl&gt;, G1_por.sd &lt;dbl&gt;, G2_por.mean &lt;dbl&gt;,\n#   G2_por.sd &lt;dbl&gt;, G3_por.mean &lt;dbl&gt;, G3_por.sd &lt;dbl&gt;\n\n\n• Find measures of center and spread across two grouping variables for three of these variables (including a G3 variable as one of them)\n\ndat |&gt; group_by(address, reason) |&gt; \n  summarise(across(c(G1_mat, G2_mat, G3_mat), \n                   list(mean = mean, sd = sd), \n                   .names =\"{.col}.{.fn}\"))\n\n`summarise()` has grouped output by 'address'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 8 × 8\n# Groups:   address [2]\n  address reason     G1_mat.mean G1_mat.sd G2_mat.mean G2_mat.sd G3_mat.mean\n  &lt;fct&gt;   &lt;fct&gt;            &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n1 R       course           11.1       2.99       10.0       4.12        9.57\n2 R       home              9.22      2.49        9.44      2.70        9.89\n3 R       other            10.1       2.85        9.56      2.79        9.22\n4 R       reputation       11.0       4.22       10.7       4.85       10.6 \n5 U       course           10.9       3.35       10.8       3.96       10.6 \n6 U       home             11.5       3.19       11.5       3.41       11.2 \n7 U       other            11.5       3.27       12.3       3.34       12.3 \n8 U       reputation       12.1       2.69       12.1       2.92       12.2 \n# ℹ 1 more variable: G3_mat.sd &lt;dbl&gt;\n\n\n• Create a correlation matrix between all of the numeric variables\n\nlibrary(ggcorrplot)\ndat |&gt; \n  select(age, ends_with(\"_mat\"), ends_with(\"_por\")) |&gt; \n  select(-paid_mat, - paid_por) |&gt; \n  cor() |&gt; \n  ggcorrplot(hc.order = TRUE, type =\"lower\", lab =TRUE)\n\n\n\n\n\n\n\n\n• Create a histogram, kernel density plot, and boxplot for two of the numeric variables across one of the categorical variables (that is, create graphs that can compare the distributions across the groups on the same plot (no faceting here)). Add appropriate labels and titles.\n\n# histograms for G3_mat and G3_por across levels of address\nggplot(dat, aes(x=G3_por, fill=address)) + \n  geom_histogram(alpha=0.3, position ='identity') + \n  ggtitle(\"Final Portuguese grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_mat, fill=address)) + \n  geom_histogram(alpha=0.3, position ='identity') + \n  ggtitle(\"Final Math grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\n\n# boxplots for G3_mat and G3_por across levels of address\nggplot(dat, aes(x=G3_por, fill=address)) + \n  geom_boxplot() + \n  ggtitle(\"Final Portuguese grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_mat, fill=address)) + \n  geom_boxplot() + \n  ggtitle(\"Final Math grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n\n\n\n\n\n\n\n\n# KDplots for G3_mat and G3_por across levels of address\nggplot(dat, aes(x=G3_por, fill=address, cut=address)) + \n  geom_density(alpha=0.3) + \n  ggtitle(\"Final Portuguese grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_mat, fill=address)) + \n  geom_density(alpha=0.3) + \n  ggtitle(\"Final Math grades (G3) by Address type\") + \n  xlab(\"Final Grade\")\n\n\n\n\n\n\n\n\n• Create two scatterplots relating a G3 variable to other numeric variables (put G3 on the y-axis). You should jitter the points if they sit on top of each other. Color the points by a categorical variable in each. Add appropriate labels and titles.\n\nggplot(dat, aes(x=G1_mat, y=G3_mat, color=address)) + \n  geom_jitter(alpha=0.6) + \n  ggtitle(\"Final Math grades (G3) vs first-term grades (G1) by Address type\") + \n  xlab(\"First term grade\") + \n  ylab(\"Final grade\")\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_por, y=G3_mat, color=address)) + \n  geom_jitter(alpha=0.6) + \n  ggtitle(\"Final Math grades vs final Portuguese grades by Address type\") + \n  xlab(\"Final Math grade\") + \n  ylab(\"Final Portuguese grade\")\n\n\n\n\n\n\n\n\n• Repeat the scatter plot step but use faceting to obtain graphs at each setting of another categorical variable.\n\nggplot(dat, aes(x=G1_mat, y=G3_mat)) + \n  geom_jitter(alpha=0.6) + \n  ggtitle(\"Final Math grades (G3) vs first-term grades (G1) by Reason type\") + \n  xlab(\"First term grade\") + \n  ylab(\"Final grade\") + \n  facet_wrap(~reason)\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_por, y=G3_mat)) + \n  geom_jitter(alpha=0.6) + \n  ggtitle(\"Final Math grades vs final Portuguese grades by Reason type\") + \n  xlab(\"Final Math grade\") + \n  ylab(\"Final Portuguese grade\") + \n  facet_wrap(~reason)\n\n\n\n\n\n\n\n\n• Repeat the scatter plot step but use faceting to obtain graphs at each combination of two categorical variables.\n\nggplot(dat, aes(x=G1_mat, y=G3_mat)) + \n  geom_jitter() + \n  ggtitle(\"Final Math grades (G3) vs first-term grades (G1)\\nby Address and Desire for Higher Education\") + \n  xlab(\"First term grade\") + \n  ylab(\"Final grade\") + \n  facet_grid(address ~ higher)\n\n\n\n\n\n\n\n\n\nggplot(dat, aes(x=G3_por, y=G3_mat)) + \n  geom_jitter() + \n  ggtitle(\"Final Math grades vs final Portuguese grades\\nby Address and Desire for Higher Education\") + \n  xlab(\"Final Math grade\") + \n  ylab(\"Final Portuguese grade\") + \n  facet_grid(address ~ higher)"
  }
]